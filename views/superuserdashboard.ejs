<%- include('partials/side-nav'); -%>
<div class="side-nav-content p-3">
  <div id='dd' class="scheduled mb-3" style="justify-content: space-between;">
    <p></p><div class="theme-heading top-welcome" style="padding-top: 0%;">Welcome</div>
    <p></p></div>

  <%errors.forEach((err)=>{%>
    <p><%=err%></p>
  <%})%>

  <div class="container mb-5 mt-5 allDetails">
    <h4 class="theme-heading text-center mb-5">Details of Staff and Students</h4>
    <div class="scheduled">
      <a class="waves-effect waves-light btn modal-trigger btn-primary btn m-3  "  href="#allTeachers" style="background: rgb(60,53,163);">All Teachers</a>
      <div id="allTeachers" class="modal" style="border-radius: 40px;">
        <div class="modal-footer" style="background: #1E1B52">
          <h4 class="theme-heading text-center"  style="margin: auto;;color: white;" >All Teachers</h4>
          <a href="#!" class="modal-close waves-effect waves-green btn-flat"><i class="fas fa-times red-text"></i></a>
        </div>
        <div class="modal-content">
          <table class="table table-striped">
            <thead>
              <tr>
                
                <th scope="col">First</th>
                <th scope="col">Mail</th>
                <th scope="col">Remove</th>
              </tr>
            </thead>
            <tbody>
          <%teachers.forEach((x)=>{%>
            <tr>
              <td><%=x.name%></td>
              <td></b><%=x.email%></td>
              <td><a class="red-text" href="/superuser/teacher/remove/<%=x.id%>"><i class="fas fa-trash-alt fa-lg " style="color:black"></i></a></b></td>
           
            </tr>
         <%})%>
        </tbody>
      </table>
        </div>
      </div>
      <a class="waves-effect waves-light btn modal-trigger btn-primary btn m-3" href="#allStudents" style="background: rgb(60,53,163);">All Students</a>
      <div id="allStudents" class="modal" style="border-radius: 40px;">
        <div class="modal-footer" style="background: #1E1B52">
          <h4 class="theme-heading text-center" style="margin: auto;;color: white;" >All Students</h4>
          <a href="#!" class="modal-close waves-effect waves-green btn-flat"><i class="fas fa-times red-text"></i></a>
        </div>
        <div class="modal-content">
          <table class="table table-striped">
            <thead>
              <tr>
                
                <th scope="col">First</th>
                <th scope="col">Mail</th>
                <th scope="col">Remove</th>
              </tr>
            </thead>
            <tbody>
             
          <%students.forEach((x)=>{%>
           
            <tr>
              <td><%=x.name%></td>
              <td></b><%=x.email%></td>
              <td><a class="red-text" href="/superuser/student/remove/<%=x.id%>"><i class="fas fa-trash-alt fa-lg " style="color:black"></i></a></b></td>
           
            </tr>
         <%})%>
       
      </tbody>
    </table>
          
        </div>
      </div>
      </div>
      <div class="seperator mt-5 "></div> 
  </div>
  <section class="dashboard">
    <div style="width: fit-content;margin: auto;">
     <img src="/images/super.jpg" style="width: 100%;"/>
    </div>

  </section>
  <section class="addTeacher">
    <div class="card-container">
      <div class="each-card text-center" id="aT">
        <div class="col s12 m6">
          <div class="card" style="background-color: white !important;">
            <div class="card-content white-text">
              <h2>Add Teachers</h2>
              <div
                class="frm-icn"
                style="background-color: #3c35a3 !important;"
              >
              <img src="/images/teacher.png" width="60" height="60"/>
              </div>
              <form action="/superuser/teacher/add" method="POST">
                <div class="form-group white-text">
                  <div class="input-field col s6">
                    <input
                      id="last_name"
                      type="text"
                      class="validate black-text"
                      style="border-color: #3c35a3;"
                      name="main[name]"
                      required
                    />
                    <label
                      for="last_name"
                      class="black-text"
                      style="pointer-events: none;"
                      >Name:</label
                    >
                  </div>
                  <div class="input-field col s6">
                    <input
                      id="last_name"
                      type="text"
                      class="validate black-text"
                      style="border-color: #3c35a3;"
                      name="main[email]"
                      required
                    />
                    <label
                      for="last_name"
                      class="black-text"
                      style="pointer-events: none;"
                      >Email:</label
                    >
                  </div>
                  <button
                    class="btn"
                    style="background:#3c35a3;color: white;"

                  >
                    Submit!
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="seperator mt-5 "></div>
<div class="container mb-5 mt-5">
  </section>
  <section class="addStudent">
    <div class="card-container">
      <div class="each-card text-center" id="aS">
        <div class="col s12 m6">
          <div class="card" style="background-color: white !important;">
            <div class="card-content white-text">
              <h2>Add Students</h2>
              <div class="frm-icn" style="background-color: #3c35a3;">
                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135810.png" width="60" height="60"/>
              </div>
              <form action="/superuser/student/add" method="POST">
                <div class="form-group white-text">
                  <div class="input-field col s6">
                    <input
                      id="last_name"
                      type="text"
                      class="validate black-text"
                      style="border-color: #3c35a3;"
                      name="mains[name]"
                      required
                    />
                    <label
                      for="last_name"
                      class="black-text"
                      style="pointer-events: none;"
                      >Name:</label
                    >
                  </div>
                  <div class="input-field col s6">
                    <input
                      id="last_name"
                      type="text"
                      class="validate black-text"
                      style="border-color: #3c35a3;"
                      name="mains[email]"
                      required
                    />
                    <label
                      for="last_name"
                      class="black-text"
                      style="pointer-events: none;"
                      >Email:</label
                    >
                  </div>
                  <button
                    class="btn"
                    style="background:#3c35a3;color: white;"
                  >
                    Submit!
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="seperator mt-5 "></div>
  </section>



<section class="discussion">
  <div class="container mb-5 mt-5 allDetails">
    <h4 class="theme-heading text-center mb-5">Discussion Types</h4>
    <div class="scheduled">
      <a class="waves-effect waves-light btn btn-primary btn m-3" href="#d1" style="background: rgb(60,53,163);">Scheduled</a>
      <a class="waves-effect waves-light btn btn-primary btn m-3" href="#d2" style="background: rgb(60,53,163);">Past</a>

      </div>
      <div class="seperator mt-5 "></div>
  </div>

  <div id="d1"></div>
  <div class="stud-row" >
    <div class="row">
      <div class="col s12 m7" >
        <div class="card" style="width: 80%;height: fit-content;border-radius: 10px;">
          <div class="card-title text-center p-3 blue-grey lighten-5 theme-heading" style="border-radius: 10px">Scheduled Discussions</div>
            <div class="card-content">
              <table class="table table-striped;border-radius: 1em;border-radius: 25px !important" >
                <thead>
                  <tr style="background:#6D7AE0;color:white;border-radius: 25px">
                    <th scope="col">Admin</th>
                    <th scope="col">Email</th>
                    <th scope="col">Room Id</th>
                    <th scope="col">Scheduled Time</th>
                     <th scope="col">Students Invited</th>
                  </tr>
                </thead>
                <tbody>
                  <% t=0 %>
                  <%scheduleddiscussions.forEach((x)=>{%>
                    <% t++ %>
                    <% if(t%2==0) { %>
                      <tr style="background:white">
                    <%} else { %>
                      <tr style="background:#F8F7FF">
                    <% } %>
                    <td scope="row"><%=x.admin%> </td>
                    <td><%=x.email%></td>
                    <td><%=x.roomId%></td>
                    <td><%=moment(x.scheduledTime).format('MMMM Do YYYY, h:mm:ss a')%></td>
                    <td> <select style="display: block;">
                      <option disabled selected class="present p-1">
                        Invited Students
                      </option>
                     <%x.students.forEach((y)=>{%>
                       <option><%=y.email%></option>
                      <%})%>
                     </select> </td>
                  </tr>
      
                  <%})%>
                  
                </tbody>
              </table>

                
          </div>
        </div>
      </div>
    </div>
  </div>
<div class="seperator mt-5 "></div>

<div id="d2"></div>
<div class="stud-row mt-5" >
  <div class="row">
    <div class="col s12 m7">
      <div class="card" style="width: 80%;height: fit-content;;border-radius: 10px;">
        <div class="card-title text-center p-3 blue-grey lighten-5 theme-heading" style="border-radius: 10px">Past Discussions</div>
          <div class="card-content">
            <table class="table table-striped;border-radius: 1em;border-radius: 25px !important" >
              <thead>
                <tr style="background:#6D7AE0;color:white;border-radius: 25px">
                  <th scope="col">Admin</th>
                  <th scope="col">Email</th>
                  <th scope="col">Room Id</th>
                  <th scope="col">Scheduled Time</th>
                   <th scope="col">Students Invited</th>
                </tr>
              </thead>
              <tbody>
                <% t=0 %>
                <%pastdiscussions.forEach((x)=>{%>
                  <% t++ %>
                  <% if(t%2==0) { %>
                    <tr style="background:white">
                  <%} else { %>
                    <tr style="background:#F8F7FF">
                  <% } %>
                  <td scope="row"><%=x.admin%>  </td>
                  <td><%=x.email%></td>
                  <td><%=x.roomId%></td>
                  <td><%=moment(x.scheduledTime).format('MMMM Do YYYY, h:mm:ss a')%></td>
                  <td><select style="display: block;">
                    <option disabled selected class="present p-1">
                      All Students
                    </option>
                     <%x.students.forEach((y)=>{%>
                         <%if(y.present==true){%>
                           <option class="present green-text p-1">
                             <%=y.email%>
                           </option>
                         <%}else if(y.present == false){%>
                           <option class="absent red-text p-1">
                             <%=y.email%>
                           </option>
                         <%}%>
                     <%})%>
                   </select> </td>
                </tr>
    
                <%})%>
                
              </tbody>
            </table>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="seperator mt-5 "></div>

</section>


<script>
  var teacherNav = document.querySelectorAll('#admin-nav');
  teacherNav.forEach((teacherNav) => {
    teacherNav.innerHTML = '';
    const navLinks = `<a id="dshbrd" href="#" onclick="dashboard()"
    ><i class="fas fa-desktop"></i><span>Dashboard</span></a
  >
  <a href="#" onclick="addTeacher()"
    ><i class="fas fa-chalkboard-teacher"></i><span>Add Teacher</span></a
  >
  <a href="#" onclick="addStudent()"
    ><i class="fas fa-user-graduate"></i><span>Add Student</span></a
  >
  <a href="#" onclick="discussion()"
        ><i class="fas fa-th"></i><span>Discussions</span></a
      >
  `;
    teacherNav.innerHTML = navLinks;
  });
  document.querySelectorAll('.hme').forEach(link => link.href = location.hostname);
  function showTime(){
      var i = 0;
    document.querySelectorAll("#dd p").forEach(d => {
      if( i === 0){
        d.textContent="Date: "+moment(Date.now()).format('Do-MM-YYYY');
        i = 1
      }
      else {d.textContent="Time: "+ moment(Date.now()).format('hh.mm.ss a');i=0;}
    });
    }
    setInterval(showTime,1);
    var popup = document.querySelectorAll('.modal');
    var instances = M.Modal.init(popup);
    $('#description').val('');
  M.textareaAutoResize($('#description'));
</script>


<script>
  if (window.performance) {
  }
  if (performance.navigation.type == performance.navigation.TYPE_RELOAD) {
    location.href = 'https://lit-depths-17371.herokuapp.com/superuser/dashboard?f=1';
  } else {
  }
</script>

<%- include('partials/footer'); -%>